<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aroha</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/fontawesome.min.css">
</head>
<body>

    <div class="header">
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <img src="{{ url_for('static', filename='images/AROHA.png') }}" alt="logo" width="125px" height="50px">
                </div>
                <nav>
                    <ul id="MenuItems">
                        <li><a href="{{ url_for('home') }}">Home</a></li>
                        <li><a href="{{ url_for('products_page') }}">Products</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="{{ url_for('signup_page') }}">Account</a></li>
                        <li><a href="{{ url_for('account_page') }}" id="account-link">Account</a></li>
                    </ul>
                </nav>
                <span id="username-display"></span>
                <img src="{{ url_for('static', filename='images/cart.png') }}" alt="cart" width="30px" height="30px" id="cart-icon">
                <img src="{{ url_for('static', filename='images/menu.png') }}" alt="menu" class="menu-icon" onclick="menutoggle()">
            </div>

            <div class="row">
                <div class="col-2">
                    <h1> Flaunt<br> your<br>roots</h1> 
                    <p>One stop for all your ethnic needs.</p>
                    <a href="" class="btn">checkout now &#8594;</a>
                </div>
                <div class="col-2">
                    <img src="{{ url_for('static', filename='images/fabric map.jpg') }}" alt="map of india">
                </div>
            </div>
        </div>
    </div>

    <!-- ft. category -->
    <div class="categories">
        <div class="small-container">
            <div class="row">
                <div class="col-3">
                    <img src="{{ url_for('static', filename='images/category north.jpg') }}" alt="north india">
                </div>
                <div class="col-3">
                    <img src="{{ url_for('static', filename='images/category south.jpg') }}" alt="south indian">
                </div>
                <div class="col-3">
                    <img src="{{ url_for('static', filename='images/category northeast.jpg') }}" alt="northeast">
                </div>
            </div>
        </div>
    </div>

    <!-- featured Products -->
    <div class="small-container">
        <h2 class="title">FEATURED PRODUCTS</h2>
        <div class="row">
            <div class="col4">
                <img src="{{ url_for('static', filename='images/phulakri.jpg') }}" alt="Phulkari">
                <h4>Phulkari</h4>
                <!-- adding ratings -->
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>700 inr</p>
            </div>
            <div class="col4">
                <img src="{{ url_for('static', filename='images/bandhej saree.jpg') }}" alt="bandhej saree">
                <h4>Bandhej Saree</h4>
                <!-- adding ratings -->
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>700 inr</p>
            </div>
            <div class="col4">
                <img src="{{ url_for('static', filename='images/linen kurta men.jpg') }}" alt="kurta">
                <h4>Linen Kurta</h4>
                <!-- adding ratings -->
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>700 inr</p>
            </div>
            <div class="col4">
                <img src="{{ url_for('static', filename='images/earrings punjab.jpg') }}" alt="earrings">
                <h4>Earrings</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>700 inr</p>
            </div>
        </div>
    </div>

    <!-- testimonials -->
    <div class="testimonial">
        <div class="small-container">
            <div class="col-3">
                <i class="fa fa-quote-left"></i>
                <p> Aroha made it so much easier to shop for the wedding season </p>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <h3>-Alaih</h3>
            </div>
            <div class="col-3">
                <i class="fa fa-quote-left"></i>
                <p> I used to struggle to find kurtas </p>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <h3>-Harpreet</h3>
            </div>
        </div>
    </div>

    <div class="footer">
        <p style="text-align: center;">&copy; 2025 AROHA. All Rights Reserved.</p>
    </div>

    <!-- Cart Dropdown -->
    <div id="cart-dropdown" class="cart-dropdown" style="display: none; position: absolute; top: 50px; right: 10px; background: #fff; padding: 10px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1);">
        <p>Your cart is empty</p>
    </div>

    <!-- js for toggle menu -->
    <script>
        // Fix menu toggle script
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";

        function menutoggle() {
            if (MenuItems.style.maxHeight === "0px") {
                MenuItems.style.maxHeight = "200px";
            } else {
                MenuItems.style.maxHeight = "0px";
            }
        }

        // Cart toggle script
        var cartIcon = document.getElementById("cart-icon");
        var cartDropdown = document.getElementById("cart-dropdown");

        cartIcon.addEventListener("click", function () {
            cartDropdown.style.display = cartDropdown.style.display === "none" ? "block" : "none";
        });

        // Close cart when clicking outside
        document.addEventListener("click", function (event) {
            if (event.target !== cartIcon && !cartDropdown.contains(event.target)) {
                cartDropdown.style.display = "none";
            }
        });

        // Check user session and display user info
        document.addEventListener('DOMContentLoaded', function() {
    const accessToken = localStorage.getItem('access_token');
    if (accessToken) {
        fetch('/api/protected', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${accessToken}`
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.logged_in_as) {
                displayUserInfo(data.logged_in_as.username);
            }
        });
    }
});;

        function displayUserInfo(username) {
    const usernameDisplay = document.getElementById('username-display');
    usernameDisplay.innerHTML = `Welcome, ${username}`;
    const accountLink = document.getElementById('account-link');
    accountLink.innerHTML = username;
}

        function logout() {
            localStorage.removeItem('access_token');
            window.location.href = '/';
        }
    </script>
</body>
</html>